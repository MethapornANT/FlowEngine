graph TD
B_Start[เริ่ม B ประมวลผล Record] --> B_Call[เรียก API เป้าหมาย]

B_Call --> B_EH[ส่งผลลัพธ์ API ให้ ErrorHandler]

B_EH --> B_Result{ผลจาก ErrorHandler}

B_Result -- SUCCESS --> C_Start[ไปขั้นตอน C]
B_Result -- RETRY --> B_Call
B_Result -- DEAD --> B_Dead[ส่งเข้า DeadQueue และจบ B]

B_Dead --> B_End[จบขั้นตอน B ด้วยสถานะล้มเหลว]
